(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5865,e=>{"use strict";var t=e.i(43476),r=e.i(75157);function s({user:e,onClick:s,isSelected:n,showEdit:i,onEdit:l}){return(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("button",{onClick:s,className:(0,r.cn)("flex flex-col items-center gap-3 p-4 rounded-lg transition-all duration-200","hover:bg-white/10",n&&"ring-2 ring-white"),children:[(0,t.jsx)("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-lg flex items-center justify-center text-4xl md:text-5xl font-bold text-white shadow-lg",style:{backgroundColor:e.color},children:e.name.charAt(0).toUpperCase()}),(0,t.jsx)("span",{className:"text-gray-300 text-lg group-hover:text-white transition-colors",children:e.name}),e.pin&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-gray-500 text-sm",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,t.jsx)("span",{children:"PIN"})]})]}),i&&l&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),l()},className:"absolute top-2 right-2 p-2 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})}e.s(["ProfileCard",()=>s])},40975,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),n=e.i(33277),i=e.i(5865);e.i(50711);var l=e.i(82045),o=e.i(83394);function a({user:e,onSuccess:s,onCancel:n}){let[i,a]=(0,r.useState)(["","","",""]),[c,d]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),h=(0,r.useRef)([]),m=(0,l.useQuery)(o.api.users.validatePin,u?{userId:e._id,pin:u}:"skip");(0,r.useEffect)(()=>{h.current[0]?.focus()},[]),(0,r.useEffect)(()=>{null!==u&&void 0!==m&&(m?s():(d(!0),a(["","","",""]),x(null),h.current[0]?.focus()))},[m,u,s]);let p=null!==u&&void 0===m;return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-900 p-8 rounded-xl max-w-md w-full mx-4",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"w-20 h-20 rounded-lg mx-auto mb-4 flex items-center justify-center text-3xl font-bold text-white",style:{backgroundColor:e.color},children:e.name.charAt(0).toUpperCase()}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:e.name}),(0,t.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your PIN to continue"})]}),(0,t.jsx)("div",{className:"flex justify-center gap-3 mb-6",children:i.map((e,r)=>(0,t.jsx)("input",{ref:e=>{h.current[r]=e},type:"password",inputMode:"numeric",maxLength:1,value:e,onChange:e=>((e,t)=>{if(!/^\d*$/.test(t))return;let r=[...i];if(r[e]=t.slice(-1),a(r),d(!1),t&&e<3&&h.current[e+1]?.focus(),t&&3===e){let e=r.join("");4===e.length&&x(e)}})(r,e.target.value),onKeyDown:e=>{"Backspace"===e.key&&!i[r]&&r>0&&h.current[r-1]?.focus(),"Escape"===e.key&&n()},disabled:p,className:`w-14 h-14 text-center text-2xl font-bold rounded-lg bg-zinc-800 border-2 
                ${c?"border-red-500":"border-zinc-700"} 
                focus:border-white focus:outline-none transition-colors
                disabled:opacity-50`},r))}),c&&(0,t.jsx)("p",{className:"text-red-500 text-center mb-4",children:"Incorrect PIN. Please try again."}),(0,t.jsx)("button",{onClick:n,className:"w-full py-3 text-gray-400 hover:text-white transition-colors",children:"Cancel"})]})})}function c(){let e=(0,s.useRouter)(),{users:l,setCurrentUser:o,isLoading:c}=(0,n.useUser)(),[d,u]=(0,r.useState)(null),[x,h]=(0,r.useState)(!1);return c?(0,t.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):l&&0===l.length?(e.push("/setup"),null):(0,t.jsxs)("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-4",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Who's watching?"}),(0,t.jsx)("p",{className:"text-gray-400 mb-12",children:"Select your profile"}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-center gap-6 max-w-4xl",children:[l?.map(r=>(0,t.jsx)(i.ProfileCard,{user:r,onClick:()=>{r.pin?(u(r),h(!0)):(o(r),e.push("/"))}},r._id)),l&&l.some(e=>e.isAdmin)&&(0,t.jsxs)("button",{onClick:()=>e.push("/admin"),className:"flex flex-col items-center gap-3 p-4 rounded-lg transition-all duration-200 hover:bg-white/10",children:[(0,t.jsx)("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-lg border-2 border-dashed border-gray-600 flex items-center justify-center hover:border-white transition-colors",children:(0,t.jsx)("svg",{className:"w-12 h-12 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,t.jsx)("span",{className:"text-gray-500 text-lg",children:"Add Profile"})]})]}),l&&l.some(e=>e.isAdmin)&&(0,t.jsx)("button",{onClick:()=>e.push("/admin"),className:"mt-12 px-6 py-2 border border-gray-600 text-gray-400 hover:text-white hover:border-white rounded transition-colors",children:"Manage Profiles"}),x&&d&&(0,t.jsx)(a,{user:d,onSuccess:()=>{d&&(o(d),h(!1),e.push("/"))},onCancel:()=>{h(!1),u(null)}})]})}e.s(["default",()=>c],40975)}]);