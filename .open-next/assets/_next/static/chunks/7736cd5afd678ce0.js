(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5865,e=>{"use strict";var t=e.i(43476),s=e.i(75157);function r({user:e,onClick:r,isSelected:i,showEdit:l,onEdit:n}){return(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("button",{onClick:r,className:(0,s.cn)("flex flex-col items-center gap-3 p-4 rounded-lg transition-all duration-200","hover:bg-white/10",i&&"ring-2 ring-white"),children:[(0,t.jsx)("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-lg flex items-center justify-center text-4xl md:text-5xl font-bold text-white shadow-lg",style:{backgroundColor:e.color},children:e.name.charAt(0).toUpperCase()}),(0,t.jsx)("span",{className:"text-gray-300 text-lg group-hover:text-white transition-colors",children:e.name}),e.pin&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-gray-500 text-sm",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,t.jsx)("span",{children:"PIN"})]})]}),l&&n&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"absolute top-2 right-2 p-2 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})}e.s(["ProfileCard",()=>r])},72906,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566);e.i(50711);var i=e.i(82045),l=e.i(83394),n=e.i(33277),a=e.i(5865);let o=["#e50914","#1db954","#ff6b35","#00a8e1","#9b59b6","#f1c40f","#e91e63","#00bcd4"];function c(){let e=(0,r.useRouter)(),{currentUser:c,users:d,isLoading:x,logout:h}=(0,n.useUser)(),m=(0,i.useMutation)(l.api.users.createUser),u=(0,i.useMutation)(l.api.users.deleteUser),[p,g]=(0,s.useState)(!1),[b,f]=(0,s.useState)(""),[j,v]=(0,s.useState)(""),[N,w]=(0,s.useState)(!1),[y,k]=(0,s.useState)(!1),[C,P]=(0,s.useState)(o[0]),[z,L]=(0,s.useState)(!1),[A,S]=(0,s.useState)(""),[M,B]=(0,s.useState)(null);(0,s.useEffect)(()=>{x||c&&c.isAdmin||e.push("/profiles")},[c,x,e]);let D=async e=>{if(e.preventDefault(),!b.trim())return void S("Please enter a name");if(N&&4!==j.length)return void S("PIN must be 4 digits");L(!0),S("");try{await m({name:b.trim(),pin:N?j:void 0,isAdmin:y,color:C}),f(""),v(""),w(!1),k(!1),P(o[0]),g(!1)}catch(e){S("Failed to create profile. Please try again."),console.error(e)}finally{L(!1)}},U=async e=>{try{if(e===c?._id)return void S("You cannot delete your own profile");await u({userId:e}),B(null)}catch(e){S("Failed to delete profile"),console.error(e)}};return x||!c?.isAdmin?(0,t.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):(0,t.jsx)("div",{className:"min-h-screen bg-black p-4 md:p-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Manage Profiles"}),(0,t.jsx)("p",{className:"text-gray-400 mt-1",children:"Add, edit, or remove user profiles"})]}),(0,t.jsx)("button",{onClick:()=>e.push("/profiles"),className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Done"})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4",children:["Profiles (",d?.length||0,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:d?.map(e=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(a.ProfileCard,{user:e,onClick:()=>{},showEdit:!1}),e._id!==c._id&&(0,t.jsx)("button",{onClick:()=>B(e._id),className:"absolute top-2 right-2 p-2 rounded-full bg-red-600/80 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.isAdmin&&(0,t.jsx)("div",{className:"absolute top-2 left-2 px-2 py-1 bg-yellow-600 text-xs font-semibold rounded",children:"Admin"})]},e._id))})]}),p?(0,t.jsxs)("div",{className:"bg-zinc-900 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Create New Profile"}),(0,t.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Profile Name"}),(0,t.jsx)("input",{id:"name",type:"text",value:b,onChange:e=>f(e.target.value),placeholder:"Enter name",className:"w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-white transition-colors",maxLength:20})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Profile Color"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-3",children:o.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>P(e),className:`w-8 h-8 rounded-full transition-transform ${C===e?"ring-2 ring-white ring-offset-2 ring-offset-zinc-900 scale-110":""}`,style:{backgroundColor:e}},e))})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-6",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:N,onChange:e=>w(e.target.checked),className:"w-4 h-4 rounded bg-zinc-800 border-zinc-700 text-red-600 focus:ring-red-600"}),(0,t.jsx)("span",{className:"text-gray-300 text-sm",children:"Protect with PIN"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:y,onChange:e=>k(e.target.checked),className:"w-4 h-4 rounded bg-zinc-800 border-zinc-700 text-red-600 focus:ring-red-600"}),(0,t.jsx)("span",{className:"text-gray-300 text-sm",children:"Admin privileges"})]})]}),N&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"pin",className:"block text-sm font-medium text-gray-300 mb-2",children:"4-Digit PIN"}),(0,t.jsx)("input",{id:"pin",type:"password",inputMode:"numeric",value:j,onChange:e=>{v(e.target.value.replace(/\D/g,"").slice(0,4))},placeholder:"****",className:"w-32 px-4 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-white transition-colors text-center text-xl tracking-widest",maxLength:4})]}),A&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:A}),(0,t.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,t.jsx)("button",{type:"submit",disabled:z,className:"px-6 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-800 rounded font-semibold text-white transition-colors",children:z?"Creating...":"Create"}),(0,t.jsx)("button",{type:"button",onClick:()=>{g(!1),S("")},className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"})]})]})]}):(0,t.jsxs)("button",{onClick:()=>g(!0),className:"w-full py-4 border-2 border-dashed border-gray-600 rounded-lg text-gray-400 hover:text-white hover:border-white transition-colors flex items-center justify-center gap-2",children:[(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Profile"]}),M&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-sm w-full mx-4",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Profile?"}),(0,t.jsx)("p",{className:"text-gray-400 mb-6",children:"This will permanently delete this profile and all associated watch history."}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>U(M),className:"flex-1 py-2 bg-red-600 hover:bg-red-700 rounded font-semibold text-white transition-colors",children:"Delete"}),(0,t.jsx)("button",{onClick:()=>B(null),className:"flex-1 py-2 bg-zinc-700 hover:bg-zinc-600 rounded font-semibold text-white transition-colors",children:"Cancel"})]})]})})]})})}e.s(["default",()=>c])}]);