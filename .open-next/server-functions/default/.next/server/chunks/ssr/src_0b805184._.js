module.exports=[1289,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({user:a,onClick:d,isSelected:e,showEdit:f,onEdit:g}){return(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsxs)("button",{onClick:d,className:(0,c.cn)("flex flex-col items-center gap-3 p-4 rounded-lg transition-all duration-200","hover:bg-white/10",e&&"ring-2 ring-white"),children:[(0,b.jsx)("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-lg flex items-center justify-center text-4xl md:text-5xl font-bold text-white shadow-lg",style:{backgroundColor:a.color},children:a.name.charAt(0).toUpperCase()}),(0,b.jsx)("span",{className:"text-gray-300 text-lg group-hover:text-white transition-colors",children:a.name}),a.pin&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-gray-500 text-sm",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,b.jsx)("span",{children:"PIN"})]})]}),f&&g&&(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),g()},className:"absolute top-2 right-2 p-2 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})}a.s(["ProfileCard",()=>d])},10179,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(11241);var e=a.i(96373),f=a.i(1322),g=a.i(35475),h=a.i(1289);let i=["#e50914","#1db954","#ff6b35","#00a8e1","#9b59b6","#f1c40f","#e91e63","#00bcd4"];function j(){let a=(0,d.useRouter)(),{currentUser:j,users:k,isLoading:l,logout:m}=(0,g.useUser)(),n=(0,e.useMutation)(f.api.users.createUser),o=(0,e.useMutation)(f.api.users.deleteUser),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(i[0]),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(null);(0,c.useEffect)(()=>{l||j&&j.isAdmin||a.push("/profiles")},[j,l,a]);let H=async a=>{if(a.preventDefault(),!r.trim())return void E("Please enter a name");if(v&&4!==t.length)return void E("PIN must be 4 digits");C(!0),E("");try{await n({name:r.trim(),pin:v?t:void 0,isAdmin:x,color:z}),s(""),u(""),w(!1),y(!1),A(i[0]),q(!1)}catch(a){E("Failed to create profile. Please try again."),console.error(a)}finally{C(!1)}},I=async a=>{try{if(a===j?._id)return void E("You cannot delete your own profile");await o({userId:a}),G(null)}catch(a){E("Failed to delete profile"),console.error(a)}};return l||!j?.isAdmin?(0,b.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):(0,b.jsx)("div",{className:"min-h-screen bg-black p-4 md:p-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Manage Profiles"}),(0,b.jsx)("p",{className:"text-gray-400 mt-1",children:"Add, edit, or remove user profiles"})]}),(0,b.jsx)("button",{onClick:()=>a.push("/profiles"),className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:"Done"})]}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4",children:["Profiles (",k?.length||0,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:k?.map(a=>(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(h.ProfileCard,{user:a,onClick:()=>{},showEdit:!1}),a._id!==j._id&&(0,b.jsx)("button",{onClick:()=>G(a._id),className:"absolute top-2 right-2 p-2 rounded-full bg-red-600/80 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),a.isAdmin&&(0,b.jsx)("div",{className:"absolute top-2 left-2 px-2 py-1 bg-yellow-600 text-xs font-semibold rounded",children:"Admin"})]},a._id))})]}),p?(0,b.jsxs)("div",{className:"bg-zinc-900 rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Create New Profile"}),(0,b.jsxs)("form",{onSubmit:H,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Profile Name"}),(0,b.jsx)("input",{id:"name",type:"text",value:r,onChange:a=>s(a.target.value),placeholder:"Enter name",className:"w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-white transition-colors",maxLength:20})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Profile Color"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-3",children:i.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>A(a),className:`w-8 h-8 rounded-full transition-transform ${z===a?"ring-2 ring-white ring-offset-2 ring-offset-zinc-900 scale-110":""}`,style:{backgroundColor:a}},a))})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-6",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:v,onChange:a=>w(a.target.checked),className:"w-4 h-4 rounded bg-zinc-800 border-zinc-700 text-red-600 focus:ring-red-600"}),(0,b.jsx)("span",{className:"text-gray-300 text-sm",children:"Protect with PIN"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:x,onChange:a=>y(a.target.checked),className:"w-4 h-4 rounded bg-zinc-800 border-zinc-700 text-red-600 focus:ring-red-600"}),(0,b.jsx)("span",{className:"text-gray-300 text-sm",children:"Admin privileges"})]})]}),v&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"pin",className:"block text-sm font-medium text-gray-300 mb-2",children:"4-Digit PIN"}),(0,b.jsx)("input",{id:"pin",type:"password",inputMode:"numeric",value:t,onChange:a=>{u(a.target.value.replace(/\D/g,"").slice(0,4))},placeholder:"****",className:"w-32 px-4 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-white transition-colors text-center text-xl tracking-widest",maxLength:4})]}),D&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:D}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,b.jsx)("button",{type:"submit",disabled:B,className:"px-6 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-800 rounded font-semibold text-white transition-colors",children:B?"Creating...":"Create"}),(0,b.jsx)("button",{type:"button",onClick:()=>{q(!1),E("")},className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"})]})]})]}):(0,b.jsxs)("button",{onClick:()=>q(!0),className:"w-full py-4 border-2 border-dashed border-gray-600 rounded-lg text-gray-400 hover:text-white hover:border-white transition-colors flex items-center justify-center gap-2",children:[(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Profile"]}),F&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-zinc-900 p-6 rounded-lg max-w-sm w-full mx-4",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Profile?"}),(0,b.jsx)("p",{className:"text-gray-400 mb-6",children:"This will permanently delete this profile and all associated watch history."}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>I(F),className:"flex-1 py-2 bg-red-600 hover:bg-red-700 rounded font-semibold text-white transition-colors",children:"Delete"}),(0,b.jsx)("button",{onClick:()=>G(null),className:"flex-1 py-2 bg-zinc-700 hover:bg-zinc-600 rounded font-semibold text-white transition-colors",children:"Cancel"})]})]})})]})})}a.s(["default",()=>j])}];

//# sourceMappingURL=src_0b805184._.js.map