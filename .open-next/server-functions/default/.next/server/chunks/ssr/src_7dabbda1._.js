module.exports=[1289,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({user:a,onClick:d,isSelected:e,showEdit:f,onEdit:g}){return(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsxs)("button",{onClick:d,className:(0,c.cn)("flex flex-col items-center gap-3 p-4 rounded-lg transition-all duration-200","hover:bg-white/10",e&&"ring-2 ring-white"),children:[(0,b.jsx)("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-lg flex items-center justify-center text-4xl md:text-5xl font-bold text-white shadow-lg",style:{backgroundColor:a.color},children:a.name.charAt(0).toUpperCase()}),(0,b.jsx)("span",{className:"text-gray-300 text-lg group-hover:text-white transition-colors",children:a.name}),a.pin&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-gray-500 text-sm",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,b.jsx)("span",{children:"PIN"})]})]}),f&&g&&(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),g()},className:"absolute top-2 right-2 p-2 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})}a.s(["ProfileCard",()=>d])},26842,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(35475),f=a.i(1289);a.i(11241);var g=a.i(96373),h=a.i(1322);function i({user:a,onSuccess:d,onCancel:e}){let[f,i]=(0,c.useState)(["","","",""]),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null),n=(0,c.useRef)([]),o=(0,g.useQuery)(h.api.users.validatePin,l?{userId:a._id,pin:l}:"skip");(0,c.useEffect)(()=>{n.current[0]?.focus()},[]),(0,c.useEffect)(()=>{null!==l&&void 0!==o&&(o?d():(k(!0),i(["","","",""]),m(null),n.current[0]?.focus()))},[o,l,d]);let p=null!==l&&void 0===o;return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-zinc-900 p-8 rounded-xl max-w-md w-full mx-4",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("div",{className:"w-20 h-20 rounded-lg mx-auto mb-4 flex items-center justify-center text-3xl font-bold text-white",style:{backgroundColor:a.color},children:a.name.charAt(0).toUpperCase()}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-white",children:a.name}),(0,b.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your PIN to continue"})]}),(0,b.jsx)("div",{className:"flex justify-center gap-3 mb-6",children:f.map((a,c)=>(0,b.jsx)("input",{ref:a=>{n.current[c]=a},type:"password",inputMode:"numeric",maxLength:1,value:a,onChange:a=>((a,b)=>{if(!/^\d*$/.test(b))return;let c=[...f];if(c[a]=b.slice(-1),i(c),k(!1),b&&a<3&&n.current[a+1]?.focus(),b&&3===a){let a=c.join("");4===a.length&&m(a)}})(c,a.target.value),onKeyDown:a=>{"Backspace"===a.key&&!f[c]&&c>0&&n.current[c-1]?.focus(),"Escape"===a.key&&e()},disabled:p,className:`w-14 h-14 text-center text-2xl font-bold rounded-lg bg-zinc-800 border-2 
                ${j?"border-red-500":"border-zinc-700"} 
                focus:border-white focus:outline-none transition-colors
                disabled:opacity-50`},c))}),j&&(0,b.jsx)("p",{className:"text-red-500 text-center mb-4",children:"Incorrect PIN. Please try again."}),(0,b.jsx)("button",{onClick:e,className:"w-full py-3 text-gray-400 hover:text-white transition-colors",children:"Cancel"})]})})}function j(){let a=(0,d.useRouter)(),{users:g,setCurrentUser:h,isLoading:j}=(0,e.useUser)(),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!1);return j?(0,b.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-600"})}):g&&0===g.length?(a.push("/setup"),null):(0,b.jsxs)("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-4",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Who's watching?"}),(0,b.jsx)("p",{className:"text-gray-400 mb-12",children:"Select your profile"}),(0,b.jsxs)("div",{className:"flex flex-wrap justify-center gap-6 max-w-4xl",children:[g?.map(c=>(0,b.jsx)(f.ProfileCard,{user:c,onClick:()=>{c.pin?(l(c),n(!0)):(h(c),a.push("/"))}},c._id)),g&&g.some(a=>a.isAdmin)&&(0,b.jsxs)("button",{onClick:()=>a.push("/admin"),className:"flex flex-col items-center gap-3 p-4 rounded-lg transition-all duration-200 hover:bg-white/10",children:[(0,b.jsx)("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-lg border-2 border-dashed border-gray-600 flex items-center justify-center hover:border-white transition-colors",children:(0,b.jsx)("svg",{className:"w-12 h-12 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,b.jsx)("span",{className:"text-gray-500 text-lg",children:"Add Profile"})]})]}),g&&g.some(a=>a.isAdmin)&&(0,b.jsx)("button",{onClick:()=>a.push("/admin"),className:"mt-12 px-6 py-2 border border-gray-600 text-gray-400 hover:text-white hover:border-white rounded transition-colors",children:"Manage Profiles"}),m&&k&&(0,b.jsx)(i,{user:k,onSuccess:()=>{k&&(h(k),n(!1),a.push("/"))},onCancel:()=>{n(!1),l(null)}})]})}a.s(["default",()=>j],26842)}];

//# sourceMappingURL=src_7dabbda1._.js.map